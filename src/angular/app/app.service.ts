import {Injectable} from '@angular/core';
import {Http} from "@angular/http";
import "rxjs/add/operator/toPromise";
import {TickerValue} from "./ticker-value";

@Injectable()
export class AppService {

    constructor(private http: Http) {
    }

    getMessage(): Promise<string> {
        return this.http.get("/json")
            .toPromise()
            .then(response => response.json().message);
    }

    getTickerValues(): Promise<TickerValue[]> {
        let data: TickerValue[] = [{"2017-06-22":"322.16"},{"2017-06-23":"321.96"},{"2017-06-26":"322.2"},{"2017-06-27":"321.94"},{"2017-06-28":"321.78"},{"2017-06-29":"321.31"},{"2017-06-30":"321.5"},{"2017-07-03":"322.21"},{"2017-07-04":"322.24"},{"2017-07-05":"321.99"},{"2017-07-06":"321.39"},{"2017-07-07":"321.42"},{"2017-07-10":"321.82"},{"2017-07-11":"321.92"},{"2017-07-12":"322.03"},{"2017-07-13":"322.1"},{"2017-07-14":"322.36"},{"2017-07-17":"322.4"},{"2017-07-18":"322.71"},{"2017-07-19":"322.63"},{"2017-07-20":"322.67"},{"2017-07-21":"322.65"},{"2017-07-24":"322.91"},{"2017-07-25":"322.68"},{"2017-07-26":"322.56"},{"2017-07-27":"322.77"},{"2017-07-28":"322.59"},{"2017-07-31":"322.33"},{"2017-08-01":"322.36"},{"2017-08-02":"322.56"},{"2017-08-03":"322.77"},{"2017-08-04":"322.61"},{"2017-08-07":"322.68"},{"2017-08-08":"322.64"},{"2017-08-09":"322.53"},{"2017-08-10":"322.33"},{"2017-08-11":"322.06"},{"2017-08-14":"322.3"},{"2017-08-16":"322.39"},{"2017-08-17":"322.81"},{"2017-08-18":"323.19"},{"2017-08-21":"323.47"},{"2017-08-22":"323.21"},{"2017-08-23":"323.36"},{"2017-08-24":"323.53"},{"2017-08-25":"323.52"},{"2017-08-28":"323.69"},{"2017-08-29":"323.88"},{"2017-08-30":"323.63"},{"2017-08-31":"323.7"},{"2017-09-01":"323.81"}]
            .map(d => {return new TickerValue(new Date(Object.keys(d)[0]), Number(d[Object.keys(d)[0]]))});
        return Promise.resolve(data)
    }
}
